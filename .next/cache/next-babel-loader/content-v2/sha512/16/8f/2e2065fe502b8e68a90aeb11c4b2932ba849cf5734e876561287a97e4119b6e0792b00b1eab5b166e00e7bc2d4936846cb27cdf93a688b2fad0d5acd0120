{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// const persistConfig = {\n//   allowList: [\n//     \"lastMarketId\",\n//     \"marketList\",\n//     \"newLocation\",\n//     \"totalCards\",\n//     \"totalMarkets\",\n//   ],\n// };\nconst nextPersist = {}; // wites to storage\n\nnextPersist.writeStorage = state => {\n  //save something to local storage\n  console.log('componentDidUpdate!', state);\n  localStorage.setItem('state', JSON.stringify(state));\n}; // retrieves from local storage\n\n\nnextPersist.getStorage = (persistConfig, state) => {\n  const clientState = localStorage.getItem('state');\n  console.log(\"hello?\", clientState);\n\n  if (clientState) {\n    const allowList = persistConfig.allowList;\n    const parsedState = JSON.parse(clientState); // console.log(\"clientState exists\", marketList);\n\n    const shiddedByDwayne = allowList.reduce((acc, curr) => {\n      acc[curr] = parsedState[curr];\n      return acc;\n    }, {});\n    console.log('stateObj: ', shiddedByDwayne);\n    console.log(\"state: \", state);\n    console.log(\"allow list: \", allowList);\n    console.log(\"parsed state: \", parsedState);\n    return _objectSpread(_objectSpread({}, state), shiddedByDwayne);\n  }\n}; // else return { state };\n\n\nexport default nextPersist;","map":{"version":3,"sources":["/Users/matthewsalvador/CS/codesmith-repos/pp/nextjs-tutorial/next-persist.js"],"names":["nextPersist","writeStorage","state","console","log","localStorage","setItem","JSON","stringify","getStorage","persistConfig","clientState","getItem","allowList","parsedState","parse","shiddedByDwayne","reduce","acc","curr"],"mappings":";;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMA,WAAW,GAAG,EAApB,C,CAEA;;AACAA,WAAW,CAACC,YAAZ,GAA4BC,KAAD,IAAW;AACpC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCF,KAAnC;AACAG,EAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,IAAI,CAACC,SAAL,CAAeN,KAAf,CAA9B;AACD,CAJD,C,CAOA;;;AACAF,WAAW,CAACS,UAAZ,GAAyB,CAACC,aAAD,EAAgBR,KAAhB,KAA0B;AACjD,QAAMS,WAAW,GAAGN,YAAY,CAACO,OAAb,CAAqB,OAArB,CAApB;AACAT,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBO,WAAtB;;AAEA,MAAIA,WAAJ,EAAiB;AACf,UAAME,SAAS,GAAGH,aAAa,CAACG,SAAhC;AACA,UAAMC,WAAW,GAAGP,IAAI,CAACQ,KAAL,CAAWJ,WAAX,CAApB,CAFe,CAGf;;AACA,UAAMK,eAAe,GAAGH,SAAS,CAACI,MAAV,CAAiB,CAACC,GAAD,EAAMC,IAAN,KAAe;AACtDD,MAAAA,GAAG,CAACC,IAAD,CAAH,GAAYL,WAAW,CAACK,IAAD,CAAvB;AACA,aAAOD,GAAP;AACD,KAHuB,EAGrB,EAHqB,CAAxB;AAIAf,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BY,eAA1B;AACAb,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,KAAvB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BS,SAA5B;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BU,WAA9B;AACA,2CACKZ,KADL,GAEKc,eAFL;AAID;AACF,CArBD,C,CAsBA;;;AAEA,eAAehB,WAAf","sourcesContent":["\n// const persistConfig = {\n//   allowList: [\n//     \"lastMarketId\",\n//     \"marketList\",\n//     \"newLocation\",\n//     \"totalCards\",\n//     \"totalMarkets\",\n//   ],\n// };\n\nconst nextPersist = {};\n\n// wites to storage\nnextPersist.writeStorage = (state) => {\n  //save something to local storage\n  console.log('componentDidUpdate!', state);\n  localStorage.setItem('state', JSON.stringify(state));\n};\n\n\n// retrieves from local storage\nnextPersist.getStorage = (persistConfig, state) => {\n  const clientState = localStorage.getItem('state');\n  console.log(\"hello?\", clientState);\n\n  if (clientState) {\n    const allowList = persistConfig.allowList;\n    const parsedState = JSON.parse(clientState);\n    // console.log(\"clientState exists\", marketList);\n    const shiddedByDwayne = allowList.reduce((acc, curr) => {\n      acc[curr] = parsedState[curr]\n      return acc\n    }, {})\n    console.log('stateObj: ', shiddedByDwayne)\n    console.log(\"state: \", state);\n    console.log(\"allow list: \", allowList);\n    console.log(\"parsed state: \", parsedState);\n    return {\n      ...state,\n      ...shiddedByDwayne,\n    };\n  }\n};\n// else return { state };\n\nexport default nextPersist;\n"]},"metadata":{},"sourceType":"module"}